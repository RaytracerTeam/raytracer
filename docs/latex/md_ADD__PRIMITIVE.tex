\chapter{Add a primitive to the project}
\hypertarget{md_ADD__PRIMITIVE}{}\label{md_ADD__PRIMITIVE}\index{Add a primitive to the project@{Add a primitive to the project}}
\label{md_ADD__PRIMITIVE_autotoc_md0}%
\Hypertarget{md_ADD__PRIMITIVE_autotoc_md0}%
 To add a primitive to the parsing, saving and editing, you need to follow these steps\+:

This example is for a Sphere.\hypertarget{md_ADD__PRIMITIVE_autotoc_md1}{}\doxysection{\texorpdfstring{Parsing and Saving}{Parsing and Saving}}\label{md_ADD__PRIMITIVE_autotoc_md1}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ ADD\ IN\ include/Scene/Primitives/AllSpheres.hpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Scene/Primitives/Sphere.hpp"{}}}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ ADD\ IN\ include/Parsing/Parsing.hpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ parseSphere(\textcolor{keyword}{const}\ libconfig::Setting\ \&primitiveSetting,\ std::unique\_ptr<Scene>\ \&scene);}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ saveSphere(libconfig::Setting\ \&list,\ Sphere\ *sphere);}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ CREATE\ FILE\ IN\ src/parsing/primitives/parseSpheres.cpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/*}}
\DoxyCodeLine{\textcolor{comment}{**\ EPITECH\ PROJECT,\ 2024}}
\DoxyCodeLine{\textcolor{comment}{**\ Raytracer}}
\DoxyCodeLine{\textcolor{comment}{**\ File\ description:}}
\DoxyCodeLine{\textcolor{comment}{**\ parseSphere}}
\DoxyCodeLine{\textcolor{comment}{*/}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Parsing/Parsing.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Scene/Materials/MaterialSolid.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Scene/Primitives/Sphere.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ Raytracer::Parsing::parseSpheres(\textcolor{keyword}{const}\ libconfig::Setting\ \&primitiveSetting,\ std::unique\_ptr<Scene>\ \&scene)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (!primitiveSetting.exists(\textcolor{stringliteral}{"{}spheres"{}}))}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \&config\ :\ primitiveSetting.lookup(\textcolor{stringliteral}{"{}spheres"{}}))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ sphere\ =\ std::make\_unique<Sphere>(parsePosition(config),}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ parseMaterial(config),}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ parseRadius(config));}
\DoxyCodeLine{\ \ \ \ \ \ \ \ scene-\/>addPrimitive(std::move(sphere));}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ ADD\ IN\ src/parsing/primitives/parsePrimitives.cpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{parseSpheres(primitiveSetting,\ scene);}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ CREATE\ FILE\ IN\ src/saving/primitives/saveSphere.cpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/*}}
\DoxyCodeLine{\textcolor{comment}{**\ EPITECH\ PROJECT,\ 2024}}
\DoxyCodeLine{\textcolor{comment}{**\ Raytracer}}
\DoxyCodeLine{\textcolor{comment}{**\ File\ description:}}
\DoxyCodeLine{\textcolor{comment}{**\ saveSphere}}
\DoxyCodeLine{\textcolor{comment}{*/}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Parsing/Parsing.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Scene/Primitives/Sphere.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Scene/Materials/MaterialSolid.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace\ }Raytracer}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ Parsing::saveSphere(libconfig::Setting\ \&list,\ Sphere\ *sphere)}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ libconfig::Setting\ \&setting\ =\ list.add(libconfig::Setting::TypeGroup);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ savePos(setting,\ sphere-\/>getOrigin());}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ libconfig::Setting\ \&sphereRadius\ =\ setting.add(CFG\_RADIUS,\ libconfig::Setting::TypeFloat);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ sphereRadius\ =\ sphere-\/>getRadius();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ saveMaterial(setting,\ torus);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}\ \textcolor{comment}{//\ namespace\ Raytracer}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ ADD\ IN\ src/scene/parsing/savePrimitives.cpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{libconfig::Setting\ \&sphereList\ =\ primitivesSetting.add(\textcolor{stringliteral}{"{}spheres"{}},\ libconfig::Setting::TypeList);}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\textcolor{keywordflow}{case}\ PrimitiveType::SPHERE:}
\DoxyCodeLine{\ \ \ \ saveSphere(sphereList,\ \textcolor{keyword}{static\_cast<}Sphere\ *\textcolor{keyword}{>}(primitive.get()));}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}

\end{DoxyCode}
\hypertarget{md_ADD__PRIMITIVE_autotoc_md2}{}\doxysection{\texorpdfstring{Editing}{Editing}}\label{md_ADD__PRIMITIVE_autotoc_md2}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ ADD\ IN\ include/Scene/Interactive/SceneInteractive.hpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ editSphere(Sphere\ *sphere);}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ CREATE\ FILE\ IN\ src/scene/interactive/imgui/primitives/editSphere.cpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/*}}
\DoxyCodeLine{\textcolor{comment}{**\ EPITECH\ PROJECT,\ 2024}}
\DoxyCodeLine{\textcolor{comment}{**\ Raytracer}}
\DoxyCodeLine{\textcolor{comment}{**\ File\ description:}}
\DoxyCodeLine{\textcolor{comment}{**\ editSphere}}
\DoxyCodeLine{\textcolor{comment}{*/}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Scene/Interactive/SceneInteractive.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Scene/Primitives/Sphere.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}Scene/Materials/MaterialSolid.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace\ }Raytracer}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ SceneInteractive::editSphere(Sphere\ *sphere)}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ (void)sphere;}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#ifdef\ BONUS}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ sphereRadius\ =\ sphere-\/>getRadius();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ImGui::SliderFloat(\textcolor{stringliteral}{"{}Radius"{}},\ \&sphereRadius,\ DEFAULT\_RADIUS\_MIN,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ DEFAULT\_RADIUS\_MAX,\ \textcolor{stringliteral}{"{}\%.3f"{}},\ ImGuiSliderFlags\_Logarithmic))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ sphere-\/>setRadius(sphereRadius);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ m\_needRendering\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}\ \textcolor{comment}{//\ namespace\ Raytracer}}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ ADD\ IN\ src/scene/interactive/imgui/primitives/guiEditPrimitives.cpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\textcolor{keywordflow}{case}\ PrimitiveType::SPHERE:}
\DoxyCodeLine{\ \ \ \ editSphere(\textcolor{keyword}{static\_cast<}Sphere\ *\textcolor{keyword}{>}(primitive.get()));}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}

\end{DoxyCode}
\hypertarget{md_ADD__PRIMITIVE_autotoc_md3}{}\doxysection{\texorpdfstring{Add the primitive with the GUI}{Add the primitive with the GUI}}\label{md_ADD__PRIMITIVE_autotoc_md3}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ ADD\ IN\ src/scene/interactive/imgui/guiAddPrimitives.cpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (ImGui::Selectable(\textcolor{stringliteral}{"{}Sphere"{}}))\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{auto}\ sphere\ =\ std::make\_unique<Sphere>(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ Math::Vector3D(0,\ 0,\ 0),}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::make\_unique<MaterialSolid>(Color(255U,\ 255,\ 255)),\ 1.0);}
\DoxyCodeLine{\ \ \ \ sphere-\/>setID(m\_scene-\/>getPrimitives().size()\ +\ 1);}
\DoxyCodeLine{\ \ \ \ m\_scene-\/>addPrimitive(std::move(sphere));}
\DoxyCodeLine{\ \ \ \ m\_needRendering\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\ \ \ \ m\_updateBVH\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\}}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}

\end{DoxyCode}
 